<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>英语复习助手</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app" class="app">
        <!-- 年级选择页面 -->
        <div id="grade-selection" class="page active">
            <div class="grade-selection-container">
                <!-- 左侧倾斜侧边栏 -->
                <div class="sidebar">
                    <div class="sidebar-content">
                        <h2 class="sidebar-title">选择年级</h2>
                        <div class="grade-list">
                            <div class="grade-item" data-grade="7">
                                <div class="grade-item-header">
                                    <span class="grade-number">七</span>
                                    <span class="grade-name">七年级</span>
                                </div>
                                <div class="semester-buttons">
                                    <button class="semester-btn" data-semester="Up">上册</button>
                                    <button class="semester-btn" data-semester="Down">下册</button>
                                </div>
                            </div>
                            <div class="grade-item" data-grade="8">
                                <div class="grade-item-header">
                                    <span class="grade-number">八</span>
                                    <span class="grade-name">八年级</span>
                                </div>
                                <div class="semester-buttons">
                                    <button class="semester-btn" data-semester="Up">上册</button>
                                    <button class="semester-btn" data-semester="Down">下册</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧预览区域 -->
                <div class="preview-area">
                    <div class="preview-content">
                        <div class="preview-header">
                            <h2 class="preview-title" id="preview-title">请选择年级和学期</h2>
                        </div>
                        <div id="unit-preview" class="unit-preview">
                            <div class="preview-placeholder">
                                <p>选择左侧的年级和学期，查看可用的单元</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="header-actions">
                <button id="notebook-btn" class="btn btn-icon notebook-btn" aria-label="错题本" title="查看错题本">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                </button>
                <button id="settings-btn" class="btn btn-icon settings-btn" aria-label="设置" title="设置">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- 单元选择页面 -->
        <div id="unit-selection" class="page">
            <div class="card">
                <div class="page-header">
                    <button class="btn btn-icon back-btn" aria-label="返回">←</button>
                    <h2 class="heading" id="grade-title">七年级单元</h2>
                </div>
                
                <div id="unit-grid" class="unit-grid"></div>
            </div>
        </div>

        <!-- 学习页面 -->
        <div id="study-page" class="page">
            <div class="card">
                <div class="study-header">
                    <button class="btn btn-icon back-btn" aria-label="返回">←</button>
                    <div class="progress-info">
                        <span id="current-progress">1/20</span>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                    <button id="restart-btn" class="btn btn-icon" aria-label="重新开始" title="重新开始默写">↻</button>
                </div>
                
                <div class="question-area">
                    <div id="chinese-text" class="chinese-text">请选择一个单元开始学习</div>
                    <div class="input-area">
                        <input type="text" id="answer-input" class="input" placeholder="输入英文翻译..." autocomplete="off">
                        <button id="submit-btn" class="btn btn-primary submit-btn">提交</button>
                    </div>
                </div>
                
                <div id="result-area" class="result-area hidden">
                    <div id="result-message" class="result-message"></div>
                    <button id="next-btn" class="btn btn-primary next-btn">下一题</button>
                </div>
            </div>
        </div>

        <!-- 统计页面 -->
        <div id="stats-page" class="page">
            <div class="card">
                <div class="page-header">
                    <button class="btn btn-icon back-btn" aria-label="返回">←</button>
                    <h2 class="heading">学习统计</h2>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-questions">0</div>
                        <div class="stat-label">总题数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="correct-answers">0</div>
                        <div class="stat-label">正确数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="accuracy-rate">0%</div>
                        <div class="stat-label">正确率</div>
                    </div>
                </div>

                <div class="wrong-answers-section">
                    <h3 class="heading">错题回顾</h3>
                    <div id="wrong-answers-list" class="wrong-answers-list"></div>
                </div>

                <div class="stats-actions">
                    <button id="retry-wrong-btn" class="btn btn-primary">重做错题</button>
                    <button id="view-notebook-btn" class="btn">查看错题本</button>
                </div>
            </div>
        </div>

        <!-- 错题本页面 -->
        <div id="notebook-page" class="page">
            <div class="card">
                <div class="page-header">
                    <button class="btn btn-icon back-btn" aria-label="返回">←</button>
                    <h2 class="heading">错题本</h2>
                </div>

                <div class="notebook-stats">
                    <div class="notebook-stat">
                        <span class="stat-value" id="notebook-total">0</span>
                        <span class="stat-label">总错题数</span>
                    </div>
                    <div class="notebook-stat">
                        <span class="stat-value" id="notebook-mastered">0</span>
                        <span class="stat-label">已掌握</span>
                    </div>
                </div>

                <div class="notebook-controls">
                    <button id="export-notebook-btn" class="btn">导出错题</button>
                    <button id="clear-notebook-btn" class="btn">清空错题本</button>
                </div>

                <div id="notebook-content" class="notebook-content"></div>
            </div>
        </div>

        <!-- 设置页面 -->
        <div id="settings-page" class="page">
            <div class="card">
                <div class="page-header">
                    <button class="btn btn-icon back-btn" aria-label="返回">←</button>
                    <h2 class="heading">设置</h2>
                </div>
                
                <div class="settings-section">
                    <h3 class="heading">AI 判题设置</h3>
                    <div class="setting-item">
                        <label for="api-key">API Key</label>
                        <input type="password" id="api-key" class="setting-input" placeholder="输入 SiliconFlow API Key">
                    </div>
                    <div class="setting-item">
                        <label for="ai-model">AI 模型</label>
                        <select id="ai-model" class="setting-select">
                            <option value="Qwen/Qwen2.5-7B-Instruct" selected>Qwen2.5-7B-Instruct (推荐)</option>
                            <option value="Qwen/Qwen3-8B">Qwen3-8B</option>
                            <option value="Qwen/Qwen2-7B">Qwen2-7B</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="enable-ai-grading">
                            <span class="checkbox-custom"></span>
                            <span>启用 AI 智能判题</span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="heading">学习设置</h3>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-next" checked>
                            <span class="checkbox-custom"></span>
                            <span>答对后自动进入下一题</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-hints">
                            <span class="checkbox-custom"></span>
                            <span>显示提示信息</span>
                        </label>
                    </div>
                </div>
                
                <div style="margin-top: var(--space-xl);">
                    <button id="save-settings-btn" class="btn btn-primary" style="width: 100%;">保存设置</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 消息提示 -->
    <div id="message" class="message"></div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
